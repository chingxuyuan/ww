<!DOCTYPE html>
<html>
<head>
	<title>信息管理系统</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<script type="text/javascript" src="../../scripts/jquery/jquery-1.7.1.js"></script>
	<link href="../../style/authority/basic_layout.css" rel="stylesheet" type="text/css">
	<link href="../../style/authority/common_style.css" rel="stylesheet" type="text/css">
	<script type="text/javascript" src="../../scripts/authority/commonAll.js"></script>
	<script type="text/javascript" src="../../scripts/jquery/jquery-1.4.4.min.js"></script>
	<script src="../../scripts/My97DatePicker/WdatePicker.js" type="text/javascript" defer="defer"></script>
	<script type="text/javascript" src="../../scripts/artDialog/artDialog.js?skin=default"></script>
	<script type="text/javascript">
		$(function(){
			var url = document.location.href;
			var s = url.split("?");
			
			if(s == null || s.length != 2){
				alert("无效id")
				return;
			}
			
			$.ajax({
				url : "/system/channel/select",
				dataType : "json",
				data : s[1],
				type : "POST",
				success : function(data){
					if(data.result){
						$("#id").val(data.object.id);
						$("#name").val(data.object.name);
						$("#nickname").val(data.object.nickname);
						$("#createTime").val(data.object.createTime);
						$("#key").val(data.object.key);
						$("#oldRelleaseKey").val(data.object.oldRelleaseKey);
						$("#oldSecretKey").val(data.object.oldSecretKey);
						$("#delayDays").val(data.object.delayDays);
						$("#memo").val(data.object.memo);
						
						if(data.object.enable){
							$("#enable").val(1);
						}else{
							$("#enable").val(0);
						}
					}else{
						alert("查询失败");
					}
				},
				error : function(){
					alert("查询失败");
				}
			});
		});
		function on_button_submit_click(){
			var form = $('form');
			var param = form.serialize();
			
			$.ajax({
				url : "/system/channel/update",
				dataType : "json",
				data : param,
				type : "POST",
				success : function(data){
					if(data.result){
						document.location.href = "channel_list.html";
					}else{
						alert("添加失败");
					}
				},
				error : function(){
					alert("添加失败");
				}
			});
		}
	</script>
</head>
<body>
	<form id="submitForm" name="submitForm" action="/xngzf/archives/initFangyuan.action" method="post">
		<input type="hidden" id="id" name="id" />
		<div id="container">
			<div class="ui_content">
				<div class="ui_text_indent">
					<div id="box_border">
						<div id="box_top">修改渠道</div>
					</div>
				</div>
			</div>
			<div class="ui_content">
				<table cellspacing="0" cellpadding="0" width="100%" align="left" border="0" class="new_web">
					<tr>
						<td class="ui_text_rt">渠道名称</td>
						<td class="ui_text_lt"><input type="text" id="name" name="name" class="ui_input_txt02" /></td>
					</tr>
					<tr>
						<td class="ui_text_rt">渠道昵称</td>
						<td class="ui_text_lt"><input type="text" id="nickname" name="nickname" class="ui_input_txt02" /></td>
					</tr>
					<tr>
						<td class="ui_text_rt">创建时间</td>
						<td class="ui_text_lt"><input type="text" id="createTime" name="createTime" class="ui_input_txt02" readonly="readonly" /></td>
					</tr>
					<tr>
						<td class="ui_text_rt">密钥</td>
						<td class="ui_text_lt"><input type="text" id="key" name="key" class="ui_input_txt02" readonly="readonly" /></td>
					</tr>
					<tr>
						<td class="ui_text_rt">旧版发布密钥(R)</td>
						<td class="ui_text_lt"><input type="text" id="oldRelleaseKey" name="oldRelleaseKey" class="ui_input_txt02" /></td>
					</tr>
					<tr>
						<td class="ui_text_rt">旧版安全密钥(S)</td>
						<td class="ui_text_lt"><input type="text" id="oldSecretKey" name="oldSecretKey" class="ui_input_txt02" /></td>
					</tr>
					<tr>
						<td class="ui_text_rt">激活到开始任务间隔</td>
						<td class="ui_text_lt"><input type="text" id="delayDays" name="delayDays" class="ui_input_txt02" /></td>
					</tr>
					<tr>
						<td class="ui_text_rt">备注</td>
						<td class="ui_text_lt"><textarea id="memo" name="memo" cols="50" rows="7"></textarea></td>
					</tr>
					<tr>
						<td class="ui_text_rt">状态</td>
						<td class="ui_text_lt">
							<select name="enable" id="enable" class="ui_select01">
								<option value="0">禁用</option>
								<option value="1">启用</option>
							</select>
						</td>
					</tr>
					<tr>
						<td class="ui_text_rt" colspan="2">
							<input id="btn_submit" type="button" value="提交" class="ui_input_btn01" onclick="on_button_submit_click()" />
						</td>
					</tr>
				</table>
			</div>
		</div>
	</form>
</body>
</html>
